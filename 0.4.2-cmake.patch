--- origsrc/wv2-0.4.2/CMakeLists.txt	2009-10-31 13:22:43.000000000 -0500
+++ src/wv2-0.4.2/CMakeLists.txt	2009-11-25 12:23:10.125400400 -0600
@@ -19,9 +19,9 @@ SET( PACKAGE wv2 )
 
 SET( CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${wvWare_SOURCE_DIR}/cmake )
 
-FIND_PACKAGE( GLIB2 REQUIRED )
-
-FIND_PACKAGE( LIBGSF REQUIRED )
+INCLUDE(FindPkgConfig)
+PKG_CHECK_MODULES( GLIB2 REQUIRED glib-2.0 )
+PKG_CHECK_MODULES( LIBGSF REQUIRED libgsf-1 )
 
 FIND_PACKAGE( Iconv REQUIRED )
 IF( ICONV_FOUND )
@@ -34,7 +34,7 @@ IF( WITH_ZLIB )
   FIND_PACKAGE( ZLIB REQUIRED )
 ENDIF( WITH_ZLIB )
 
-INCLUDE_DIRECTORIES( ${GLIB2_INCLUDE_DIR} ${LIBGSF_INCLUDE_DIR} ${ICONV_INCLUDE_DIR} ${ZLIB_INCLUDE_DIR} )
+INCLUDE_DIRECTORIES( ${GLIB2_INCLUDE_DIRS} ${LIBGSF_INCLUDE_DIRS} ${ICONV_INCLUDE_DIR} ${ZLIB_INCLUDE_DIR} )
 
 #
 # Iconv checks
@@ -59,7 +59,7 @@ IF( HAVE_SYS_ICONV_H )
   SET( ICONV_COMPILE_DEFINITIONS ${ICONV_COMPILE_DEFINITIONS} "-DHAVE_SYS_ICONV_H" )
 ENDIF( HAVE_SYS_ICONV_H )
 
-TRY_RUN( MODERN_ICONV_RUN MODERN_ICONV_COMPILE ${wvWare_BINARY_DIR}/CMakeTmp ${wvWare_SOURCE_DIR}/cmake/TestModernIconv.c COMPILE_DEFINITIONS ${ICONV_COMPILE_DEFINITIONS} )
+TRY_RUN( MODERN_ICONV_RUN MODERN_ICONV_COMPILE ${wvWare_BINARY_DIR}/CMakeTmp ${wvWare_SOURCE_DIR}/cmake/TestModernIconv.c CMAKE_FLAGS -DLINK_LIBRARIES=${ICONV_LIBRARIES} COMPILE_DEFINITIONS ${ICONV_COMPILE_DEFINITIONS} )
 
 IF( MODERN_ICONV_RUN GREATER 0 OR NOT MODERN_ICONV_COMPILE )
   MESSAGE( STATUS "wv2 depends on a modern iconv installation, supporting UNICODELITTLE and" )
@@ -144,7 +144,7 @@ ENDIF( ZLIB_FOUND )
 
 IF( LIBGSF_FOUND )
   SET( _WV2_LDFLAGS ${_WV2_LDFLAGS} ${LIBGSF_LIBRARIES} )
-  SET( _WV2_CFLAGS ${_WV2_CFLAGS} ${LIBGSF_INCLUDE_DIR} )
+  SET( _WV2_CFLAGS ${_WV2_CFLAGS} ${LIBGSF_INCLUDE_DIRS} )
 ENDIF( LIBGSF_FOUND )
 
 IF( ICONV_FOUND )
@@ -154,7 +154,7 @@ ENDIF( ICONV_FOUND )
 
 IF( GLIB2_FOUND )
   SET( _WV2_LDFLAGS ${_WV2_LDFLAGS} ${GLIB2_LIBRARIES} )
-  SET( _WV2_CFLAGS ${_WV2_CFLAGS} ${GLIB2_INCLUDE_DIR} )
+  SET( _WV2_CFLAGS ${_WV2_CFLAGS} ${GLIB2_INCLUDE_DIRS} )
 ENDIF( GLIB2_FOUND )
 
 #
--- origsrc/wv2-0.4.2/src/CMakeLists.txt	2009-10-31 13:22:43.000000000 -0500
+++ src/wv2-0.4.2/src/CMakeLists.txt	2009-11-25 05:08:46.094623100 -0600
@@ -91,7 +91,7 @@ INSTALL( TARGETS wv2
     EXPORT wvWare
     RUNTIME DESTINATION bin
     LIBRARY DESTINATION lib${LIB_SUFFIX}
-    ARCHIVE DESTINATION lib${LIB_SUFFIX}/static
+    ARCHIVE DESTINATION lib${LIB_SUFFIX}
 )
 
 INSTALL( EXPORT wvWare DESTINATION lib${LIB_SUFFIX}/wvWare FILE wv2.cmake )
@@ -101,7 +101,7 @@ INSTALL( FILES ${wv2_HEADERS}
 )
 
 # libtool files are useless for Visual C++ and Borland C++
-IF( NOT MSVC AND NOT BORLAND )
+IF( NOT MSVC AND NOT BORLAND AND NOT CYGWIN )
   INCLUDE( ${wvWare_SOURCE_DIR}/cmake/MacroCreateLibtoolFile.cmake )
   CREATE_LIBTOOL_FILE( wv2 /lib${LIB_SUFFIX} )
-ENDIF( NOT MSVC AND NOT BORLAND )
+ENDIF( NOT MSVC AND NOT BORLAND AND NOT CYGWIN )
